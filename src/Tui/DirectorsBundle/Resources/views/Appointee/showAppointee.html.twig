{% extends "TuiDirectorsBundle::base.html.twig" %}

{% block content %}
    
    <div id="appointee-details"> 
        
        <h3>Personal details</h3> 
            
            <p> 
                <strong>Full name:</strong> 
                <span id="appointee-name"> {{ appointee.forenames }} {{ appointee.surname }} </span> 
                (<span id="appointee-id">{{ appointee.id }}</span>)<br> 
    
                <strong title="Sometimes another company can be appointed to the role of company secretary or director">Type:</strong> 
                <span id="appointee-type">{% if appointee.isCorporate %}Corporate{% else %}Individual{% endif %}</span><br>
 
                <strong title="This is the Companies House revision number of the person's information">Revision:</strong> 
                <span id="appointee-revision">{{ appointee.revision }}</span><br> 
 
                <strong>Occupation:</strong> 
                <span id="appointee-occupation">{{ appointee.occupation }}</span><br> 
 
                <strong>Date of birth:</strong> 
                <span id="appointee-birthdate">{% if not appointee.dateOfBirth is empty %}{{ appointee.dateOfBirth|date("Y-m") }}{% endif %}</span><br> 
 
                <strong>Postcode:</strong> 
                <span id="appointee-postcode"><a href="http://maps.google.com/?q={{ trimmedPostcode|url_encode }}%20{{ appointee.country|url_encode }}">{{ trimmedPostcode }}</a></span> 
                <span class="small quiet">(Google Maps link is APPROXIMATE, based on partial postcode only)</span>
    
                <br> 
 
                <strong title="This is the country of the appointee's service address, not necessarily their country of residence or nationality.">Country:</strong> 
                <span id="appointee-country">{{ appointee.country }}</span><br> 
            </p> 

    </div> 
 
 
    <h3>Appointments</h3> 
 
    {# if all the appointments could be displayed on one page #}
    
    {% if companyAppointments|length == totalCompanyAppointments %}
        <p>Showing all {{ totalCompanyAppointments }} appointments.</p> 
    
    {% else %}
        <p>Showing {{ offset + 1 }} - 
            
            {# check in case the last appointment is on this page #}
            
            {% if (offset + numAppointments) < totalCompanyAppointments %} {{ offset + numAppointments }}
            {% else %} {{ totalCompanyAppointments }} {% endif %}
                                  
        of {{ totalCompanyAppointments }} appointments.
        
        {# render pager #}
        
        {% if not offset == 0 %}
            <a href="{{ url('appointee_show', {'id': appointee.id, 'page': page - 1 } )}}">« Previous</a>&nbsp;&nbsp;
        {% endif %}

        {% if (offset + numAppointments) < totalCompanyAppointments %}
            <a href="{{ url('appointee_show', {'id': appointee.id, 'page': page + 1 } )}}">Next »</a>
        {% endif %}
        
        </p>
        
    {% endif %}
        
    <table id="appointments"> 
        <thead> 
            <tr> 
                <th scope="col">Date</th> 
                <th scope="col">Type</th> 
                <th scope="col">Company</th> 
            </tr> 
        </thead> 
        <tbody> 
    
        	{% for appointment in companyAppointments %}
 			
 				<tr>			
 					<td>{{ appointment.appointedOn|date("Y-m-d") }}</td>
 					<td>{{ appointment.type }}</td>
					<td><A href="{{ url( 'company_show', { 'id': appointment.companyId }) }}">{{ appointment.company.name }}</a></td>
				</tr>
				
 			{% endfor %} 
                  
        </tbody> 
    </table> 
 
    <h3>Annotations</h3> 
 
    <h4>Corrections</h4> 
 
    <h4>Websites</h4> 
 
    <h4>Locations</h4> 
 	
	<p>Alternative presentations: <a href="{{ url('appointee_show', {'id': appointee.id ,'_format': 'json', 'page': ((offset + numAppointments) / numAppointments)}) }}">JSON</a>, <a href="{{ url('appointee_show', {'id': appointee.id ,'_format': 'rdf', 'page': ((offset + numAppointments) / numAppointments)})}}">RDF</a></p> 
    
{% endblock %}