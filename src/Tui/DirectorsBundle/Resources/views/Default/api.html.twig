{% extends "TuiDirectorsBundle::base.html.twig" %}

{% block title %}API - Who runs it?{% endblock %}

{% block content %}
<div class="span-5">
    <h2>Scraping and API access</h2> 
      <ul> 
        <li><p>Please limit automated requests to 1 request per second. If you go significantly over this limit, your IP may be automatically banned.</p></li> 
        <li><p>Check for and respect <kbd>robots.txt</kbd>. It's empty right now, mind you.</p></li> 
        <li><p>Always set a meaningful User-Agent when making HTTP requests. It should contain an <kbd>http:</kbd> or <kbd>mailto:</kbd> URL in case we need to contact you.</p></li> 
        <li><p>Person and Company numbers are non-sequential, and many are non-numeric. Don't waste your time counting from 00000000 to 99999999.</p></li> 
        <li><p>If you have questions, <a href="http://inanimatt.com/contact.php">contact Matt</a></p></li> 
      </ul> 
  
      <h2>Other notes</h2> 
      <ul> 
        <li><p>This is an unstable, early release. More of a proof of concept, really. Expect more features, but also more disruption later.</p></li> 
        <li><p>HTML, RDF and JSON outputs exist. Follow the links on each page, or change the URL extension to .rdf to get RDF output, and .json to get JSON output. You can also add a '&amp;callback=myFunc' parameter to return JSONP instead.</p></li> 
        <li><p>Many thanks to <a href="http://www.nicecupoftea.org">Libby Miller</a> for the RDF output.</p></li> 
        <li><p>Please <a href="http://inanimatt.com/contact.php">get in touch!</a></p></li> 
      </ul> 
</div>

<div class="span-5 last">
    <h2>Methods</h2>
    <dl>
        <dt><kbd>/search/all.json?q=<span class="variable" title="Search terms (url encoded string)">shell</span>&amp;page=<span class="variable" title="Page number (optional integer)">1</span></kbd></dt>
        <dd><p>Search appointees and companies</p></dd>

        <dt><kbd>/search/appointees.json?q=<span class="variable" title="Search terms (url encoded string)">paul+anderson</span>&amp;page=<span class="variable" title="Page number (optional integer)">1</span></kbd></dt>
        <dd><p>Search appointees only</p></dd>

        <dt><kbd>/search/companies.json?q=<span class="variable" title="Search terms (url encoded string)">bp+p.l.c.</span>&amp;page=<span class="variable" title="Page number (optional integer)">1</span></kbd></dt>
        <dd><p>Search companies only</p></dd>
        
        <dt><kbd>/companies/<span class="variable" title="Companies House company number (string)">00102498</span>.json?page=<span class="variable" title="Page number (optional integer)">1</span></kbd><br>
            <kbd>/companies/<span class="variable" title="Companies House company number (string)">00102498</span>.rdf</kbd><br></dt>
        <dd><p>Show company detail and appointments.</p></dd>
        
        <dt><kbd>/appointees/<span class="variable" title="Companies House person number (string)">00102498</span>.json?page=<span class="variable" title="Page number (optional integer)">1</span></kbd><br>
            <kbd>/appointees/<span class="variable" title="Companies House person number (string)">00102498</span>.rdf</kbd><br></dt>
        <dd><p>Show company detail and appointments</p></dd>
    </dl>
    
    <h2>Output notes</h2>
    <ul>
        <li><p>All JSON methods return a <kbd>urls</kbd> array containing <kbd>next_page</kbd> and <kbd>prev_page</kbd> objects if available. URL objects have <kbd>href</kbd>, <kbd>type</kbd>, and <kbd>title</kbd> properties.</p></li>
        <li><p>Companies House numbers are alphanumeric strings with a length of 8 characters.</p></li>
        <li><p>Sorry, no content-type negotiation yet.</p></li>
        <li><p>Appointee and Company methods return a <kbd>Link:&lt;http://whoruns.it/â€¦&gt;;rel=shorturl</kbd> header.</p></li>
    </ul>
</div>
{% endblock %}
